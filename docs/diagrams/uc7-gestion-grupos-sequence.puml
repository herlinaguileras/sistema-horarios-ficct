@startuml
skinparam sequenceArrowThickness 2
skinparam roundcorner 20
skinparam maxmessagesize 60
skinparam sequenceParticipant underline

actor Administrador
participant "index.blade.php" as GruposView <<Boundary>>
participant "GrupoController" as Controller <<Control>>
participant "Grupo" as GrupoModel <<Entity>>
participant "Semestre" as SemestreModel <<Entity>>
participant "Materia" as MateriaModel <<Entity>>
participant "Docente" as DocenteModel <<Entity>>

Administrador -> GruposView: accederGestionGrupos()
activate GruposView

GruposView -> Controller: GET route('grupos.index')
activate Controller

Controller -> Controller: index()

Controller -> GrupoModel: with(['semestre', 'materia', 'docente.user'])->get()
activate GrupoModel

GrupoModel --> Controller: listaGrupos
deactivate GrupoModel

Controller --> GruposView: view('grupos.index', grupos)
deactivate Controller

GruposView --> Administrador: mostrarListaGrupos()

Administrador -> GruposView: clickAsignarCargaHoraria()

GruposView -> Controller: GET route('grupos.create')
activate Controller

Controller -> Controller: create()

Controller -> SemestreModel: all()
activate SemestreModel
SemestreModel --> Controller: semestres
deactivate SemestreModel

Controller -> MateriaModel: all()
activate MateriaModel
MateriaModel --> Controller: materias
deactivate MateriaModel

Controller -> DocenteModel: with('user')->get()
activate DocenteModel
DocenteModel --> Controller: docentes
deactivate DocenteModel

Controller --> GruposView: view('grupos.create', datos)
deactivate Controller

GruposView --> Administrador: mostrarFormulario(menúsDesplegables)

Administrador -> GruposView: submitForm(semestre_id, materia_id, docente_id, nombre)

GruposView -> Controller: POST route('grupos.store')
activate Controller

Controller -> Controller: store(Request)

Controller -> Controller: validarIDs(exists en tablas)

Controller -> GrupoModel: create(validatedData)
activate GrupoModel

GrupoModel --> Controller: grupoCreado
deactivate GrupoModel

Controller -> Controller: redirect()->route('grupos.index')

Controller --> GruposView: RedirectResponse(status: '¡Grupo creado!')
deactivate Controller

GruposView --> Administrador: mostrarMensajeExito()
deactivate GruposView

@enduml
